<br>
<div class="cont">
<div class="spinner" *ngIf="loading">
  <div class="double-bounce1"></div>
  <div class="double-bounce2"></div>
</div>

<div *ngIf="!loading">
  <!--<div *ngFor="let item of userAppointments">
    <div class="ui stacked segment">
      <div class="header">
        <span *ngIf="item.emergency == 'yes'">
          <a class="ui red  ribbon label" >emergency</a>
        </span>
        <span *ngIf="item.state == 'rescheduled'">
          <span style="float:right; margin-right:10px; margin-bottom: 10px;" class="ui medium right floated purple tag label">{{item.state}}</span>
        </span>
        <span style="float:right; margin-right:10px; margin-bottom: 10px;" class="ui medium right floated olive tag label">{{item.time}}</span>

        <span style="float:right; margin-right:10px; margin-bottom: 10px;" class="ui medium right floated teal tag label">{{item.date}}</span>

      </div>
      <div class="content">
        <table class="ui small definition table">

          <tr>
            <td class="active"><b>Name</b></td>
            <td>{{item.username}}</td>
          </tr>

          <tr>
            <td class="active"><b>Phone</b></td>
            <td>{{item.userPh}}</td>
          </tr>

          <tr>
            <td class="active"><b>Address</b></td>
            <td>{{item.userAddress}}</td>
          </tr>

          <tr>
            <td class="active"><b>Device</b></td>
            <td>{{item.device}}</td>
          </tr>

          <tr>
            <td class="active"><b>Description</b></td>
            <td>{{item.description}}</td>
          </tr>

          <tr>
            <td class="active"><b>Brand</b></td>
            <td>{{item.brand}}</td>
          </tr>
        </table>
        <div class="ui positive button" (click)="appointmentAction(item.$key,item.uid,item.spid,item.company,item.branch,item.date,item.time,item.device,'approve')">Approve</div>
        <div class="ui blue button" (click)="appointmentAction(item.$key,item.uid,item.spid,item.company,item.branch,item.date,item.time,item.device,'reschedule')">Reschedule</div>
        <div class="ui button" (click)="appointmentAction(item.$key,item.uid,item.spid,item.company,item.branch,item.date,item.time,item.device,'cancel')">Call to Cancel</div>
      </div>

    </div>
  </div>-->
  <div *ngIf = "userAppointments">
    <div class="ui page stackable two column grid">
      <div class="column" *ngFor="let item of userAppointments">
        <div class="ui raised segment">
          <span *ngIf="item.emergency == 'yes'">
            <a class="ui red ribbon label">emergency</a>
          </span>

          <div class="content">
            <img class="right floated ui mini image" src="{{item.imgurl}}">
            <div class="header">
              <span>{{item.username}}</span>
            </div>
            <span *ngIf="item.state == 'rescheduled'">
              <span style="margin:10px;" class="ui medium right floated purple tag label">{{item.state}}</span>
            </span>
            <span style="margin:10px;" class="ui small right floated olive tag label">{{item.time}}</span>
            <span style="margin:10px;" class="ui small right floated teal tag label">{{item.date}}</span>
            <br>
            <div class="description">
              <table class="ui small definition unstackable table">
                <tr>
                  <td class="active"><b>Phone</b></td>
                  <td>{{item.userPh}}</td>
                </tr>

                <tr>
                  <td class="active"><b>Address</b></td>
                  <td>{{item.userAddress}}</td>
                </tr>

                <tr>
                  <td class="active"><b>Device</b></td>
                  <td>{{item.device}}</td>
                </tr>

                <tr>
                  <td class="active"><b>Description</b></td>
                  <td>{{item.description}}</td>
                </tr>

                <tr>
                  <td class="active"><b>Brand</b></td>
                  <td>{{item.brand}}</td>
                </tr>
              </table>
              
                <button class="ui tiny positive button" (click)="appointmentAction(item.$key,item.uid,item.spid,item.company,item.branch,item.date,item.time,item.device,item.spimg,'approve')">Approve</button>
                <button class="ui tiny blue button" (click)="appointmentAction(item.$key,item.uid,item.spid,item.company,item.branch,item.date,item.time,item.device,item.spimg,'reschedule')">Reschedule</button>
                <button class="ui tiny button" (click)="appointmentAction(item.$key,item.uid,item.spid,item.company,item.branch,item.date,item.time,item.device,item.spimg,'cancel')">Call to Cancel</button>
            
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="userAppointments.length <= 0">
    <div class="ui centered container">
        <div class="ui page stackable column grid">
            <div class="row"></div>
            <div class="row"></div>
            <div class="row"></div>
            <div class="row">
                <div class="column">
                <div class="ui center aligned floating message">
                    <p>No Queuing Appointments</p>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<div class="ui small reschedule-modal modal">
  <i class="close icon"></i>
  <div class="centered aligned content">
    <h3 class="ui centered header">Reschedule Appointment</h3>
    <div class="ui horizontal divider">
      <div class="ui mini image"> <img src="./assets/icons/repairman.svg"></div>
    </div>
    <form class="ui small form" (ngSubmit)="onSubmit(spRescheduleForm.value)" #spRescheduleForm="ngForm">
      <!--<h4 class="ui dividing header">Contact Information</h4>-->
      <div class="field">
        <label>Date</label>
        <select class="ui dropdown"  [(ngModel)]="date" name="date">
            <option *ngFor="let d of dateArray" [value]="d" >{{d}}</option>
        </select>
      </div>

      <div class="field">
        <label>Time Slot</label>
        <select  class="ui dropdown" [(ngModel)]="time" name="time">
            <option>9am - 12pm</option>
            <option>12pm - 3pm</option>
            <option>3pm - 6pm</option>
        </select>
      </div>

      <button class="ui fluid blue button" type="submit">Reschedule</button>

    </form>
  </div>

</div>
</div>